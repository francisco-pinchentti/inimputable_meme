<!DOCTYPE html>
<html>

  <head>
    <link href="/static/styles.css" rel="stylesheet">
    <script src="/static/jquery-3.2.1.min.js"></script>
    <script src="/static/html2canvas.min.js"></script>
    
    <!--
    <script src="/static/canvas2image.js"></script>
    -->

    <script type="text/javascript">

      var fontSize = 21;
      const exportConfig = {
        width: 600,
        height: 640
      }

      $(document).ready(function() {
        $('#inimputable-input')
        .css("font-size", `${fontSize}px`)
        .focus()
        .bind('keydown', function(event) {
            if (event.key !== '-' && event.key !== '+') {
              return;
            }
            var adj = event.key === '-' ? -1 : 1;
            fontSize += adj;
            $('#inimputable-input').css("font-size", `${fontSize+adj}px`);
            event.preventDefault();
        });

        $('#exportButton').click( function() {
          html2canvas($('.inimputable'), {
            width: exportConfig.width,
            height: exportConfig.height,
            onrendered: function(canvas) {
              $('#exported-list').prepend('<li></li>');
              $('#exported-list li').first().append(canvas)
              //Canvas2Image.saveAsPNG(canvas, exportConfig.width, exportConfig.height)
            }
          });
        });
        

      });

    </script>

  </head>

  <body>

    <h2>Inimputable MEME generator!</h2>

    <section class="inimputable">
      
      <div class="ininputable-question" contenteditable="true">
        Que hace si le hacen un meme?
      </div>

      <div id="inimputable-input" contenteditable="true">
        Si me llegan a hacer un meme <br/>
        vos no podes dejar de habilitar <br /> 
        el '+' para aumentar el tamaño de la fuente <br />
        y sino también el '-' para reducirlo <br />
        porque va a decir que sos hábil frontend developer...
      </div>
    </div>

    <section class="exported-wrapper">

        <h3>Podes <button id="exportButton" type="button">Generar</button> tu meme y despues darle boton derecho para bajar la imágen generada y llevarlas hasta lo más recóndito del disco duro!</h3>

        <ul id="exported-list"></ul>

    </section>

  </body>

</html>